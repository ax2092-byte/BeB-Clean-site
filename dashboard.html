<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>B&B Clean — Admin Dashboard</title>
  <link rel="icon" href="/favicon.png">
  <link rel="stylesheet" href="/styles.css">
  <link rel="stylesheet" href="/bbclean-theme.css">
  <style>
    .wrap{max-width:1200px;margin:0 auto;padding:20px}
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0 20px}
    .tab-btn{padding:8px 12px;border-radius:10px;border:1px solid var(--bb-border,#1f2937);background:var(--bb-card,#0f1418);color:#e5e7eb;cursor:pointer}
    .tab-btn.active{outline:2px solid rgba(20,184,166,.28)}
    .card{background:var(--bb-card,#0f1418);border:1px solid var(--bb-border,#1f2937);border-radius:16px;padding:16px;margin:10px 0 18px}
    .muted{color:var(--bb-muted,#9ca3af)}
    table{width:100%;border-collapse:separate;border-spacing:0}
    th,td{padding:10px;border-bottom:1px solid var(--bb-border,#1f2937);text-align:left;vertical-align:top}
    th{font-weight:600;color:#e5e7eb}
    .badge{display:inline-block;padding:4px 8px;border-radius:999px;border:1px solid var(--bb-border,#1f2937);font-size:12px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    input,select,textarea{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--bb-border,#1f2937);background:#0c1114;color:#e5e7eb}
    .btn{display:inline-block;padding:8px 12px;border-radius:12px;border:1px solid var(--bb-border,#1f2937);background:var(--bb-teal,#14b8a6);color:#001010;cursor:pointer;font-weight:600}
    .btn.ghost{background:transparent;color:#e5e7eb}
    .right{text-align:right}
    .toolbar{display:flex;gap:8px;align-items:center;justify-content:space-between}
    .status-in_attesa{background:#111827;color:#e5e7eb}
    .status-approvato{background:#052d27;color:#9ff2e5;border:1px solid rgba(20,184,166,.4)}
    .status-rifiutato{background:#2a0f0f;color:#fca5a5;border:1px solid rgba(239,68,68,.4)}
    .token-banner{background:#1f2937;border:1px dashed #374151;padding:10px;border-radius:12px;margin-bottom:12px}
  </style>
</head>
<body>
  <header class="container nav">
    <div class="logo">B&amp;B <span>Clean</span></div>
    <nav>
      <a href="/index.html">Home</a>
      <a href="/partner-app.html">Area Partner</a>
      <a href="/dashboard.html" class="active">Admin</a>
    </nav>
  </header>

  <main class="wrap">
    <h1>Admin Dashboard</h1>
    <p class="muted">Gestione interna — KYC, richieste e controlli.</p>

    <div class="tabs">
      <button class="tab-btn active" data-tab="kyc">KYC</button>
      <button class="tab-btn" data-tab="altro" disabled>Altro (coming soon)</button>
    </div>

    <!-- KYC -->
    <section id="tab-kyc" class="card">
      <div class="toolbar">
        <div style="display:flex;gap:8px;align-items:center">
          <label>Filtro stato</label>
          <select id="kycFilter">
            <option value="">Tutti</option>
            <option value="in_attesa">In attesa</option>
            <option value="approvato">Approvato</option>
            <option value="rifiutato">Rifiutato</option>
          </select>
          <button class="btn" id="btnReload">Ricarica</button>
        </div>
        <div>
          <button class="btn ghost" id="btnSetAdmin">Imposta nome admin</button>
          <button class="btn ghost" id="btnSetToken">Imposta token</button>
        </div>
      </div>

      <div id="adminHints" class="token-banner" style="display:none"></div>

      <div class="card">
        <table id="kycTable">
          <thead>
            <tr>
              <th>Data</th>
              <th>Partner</th>
              <th>Documento</th>
              <th>Stato</th>
              <th class="right">Azione</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="5" class="muted">Caricamento…</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Placeholder altri tab -->
    <section id="tab-altro" class="card" style="display:none">
      <p class="muted">Altre sezioni in arrivo.</p>
    </section>
  </main>

  <script>
    // gestione tab
    const tabs = document.querySelector('.tabs');
    const sections = { kyc: document.getElementById('tab-kyc'), altro: document.getElementById('tab-altro') };
    tabs.addEventListener('click', (e)=>{
      const b = e.target.closest('.tab-btn'); if(!b || b.disabled) return;
      document.querySelectorAll('.tab-btn').forEach(x=>x.classList.toggle('active', x===b));
      Object.values(sections).forEach(s=>s.style.display='none');
      sections[b.dataset.tab].style.display='';
    });
  </script>
  <script src="/admin-kyc-decision.js"></script>
  <script src="/admin-kyc-list.js"></script>
</body>
</html>

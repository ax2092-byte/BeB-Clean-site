<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>B&B Clean â€” Login Partner</title>
  <link rel="icon" href="/assets/img/favicon-32.png">
  <script src="/assets/js/theme.js"></script>
  <link rel="stylesheet" href="/assets/css/styles.css">
</head>
<body data-back-fallback="/partner.html">
<header class="container nav">
  <div class="logo"><img src="/assets/img/bbclean-logo-primary.png" alt="B&B Clean" style="height:32px"></div>
  <nav id="main-nav">
    <a href="/index.html">Home</a><a href="/stima.html">Stima</a><a href="/prenota.html">Prenota</a>
    <a href="/partner.html" data-role="nav-partner-cta">Diventa partner</a>
  </nav>
</header>

<main class="container">
  <h1>Accedi come Partner</h1>
  <div class="card" style="text-align:center;">
    <button id="login" class="btn">Accedi / Registrati</button>
  </div>
</main>

<script src="/assets/js/vendor/auth0-spa-js.production.js"></script>
<script src="/assets/js/auth-config.js"></script>
<script src="/assets/js/auth.js"></script>
<script>
(async function(){
  const cfg = window.AUTH0_CONFIG || {};
  const factory = (window.auth0 && window.auth0.createAuth0Client) ? window.auth0.createAuth0Client : window.createAuth0Client;
  const client = await factory(cfg);
  const isAuth = await client.isAuthenticated();
  if (isAuth) return location.href='/partner-dashboard.html';
  document.getElementById('login').addEventListener('click', async ()=>{
    await client.loginWithRedirect({ authorizationParams: { redirect_uri: window.location.origin + '/partner-dashboard.html' }});
  });
})();
</script>
<script src="/assets/js/top-banner.js"></script>
<script src="/assets/js/back-arrow.js"></script>
</body>
</html>

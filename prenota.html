<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Prenota — B&B Clean</title>
  <meta name="description" content="Prenota una pulizia per casa o B&B. Stima trasparente di tempi e costi, pagamento online sicuro.">
  <link rel="icon" href="/favicon.png">
  <link rel="stylesheet" href="/assets/css/styles.css">
</head>
<body class="light">
  <!-- Header / Navbar -->
  <header class="container nav">
    <a class="brand" href="/index.html" aria-label="Home">
      <img src="/assets/img/bbclean-logo-primary.png" alt="B&B Clean" class="logo">
      <span class="brand-text">B&B <strong>Clean</strong></span>
    </a>
    <nav>
      <a href="/servizi.html">Servizi</a>
      <a href="/login.html">Accedi</a>
      <a href="/signup.html" class="btn">Iscriviti</a>
    </nav>
  </header>

  <main class="container section">
    <h1>Prenota il tuo servizio</h1>
    <p class="subtitle">Descrivi l’alloggio, scegli gli extra e conferma. Stima aggiornata in tempo reale.</p>

    <div class="split">
      <!-- Form prenotazione -->
      <form id="prenota-form" class="card" novalidate>
        <h2 class="section-title">Dettagli alloggio</h2>
        <div class="grid-3">
          <div>
            <label for="indirizzo">Indirizzo</label>
            <input type="text" id="indirizzo" name="indirizzo" placeholder="Via, civico, città" required>
          </div>
          <div>
            <label for="mq">Metri quadri</label>
            <input type="number" id="mq" name="mq" min="10" step="1" placeholder="Es. 60" required>
          </div>
          <div>
            <label for="stanze">N. stanze</label>
            <input type="number" id="stanze" name="stanze" min="1" step="1" placeholder="Es. 3" required>
          </div>
        </div>

        <div class="grid-3">
          <div>
            <label for="bagni">N. bagni</label>
            <input type="number" id="bagni" name="bagni" min="1" step="1" placeholder="Es. 1" required>
          </div>
          <div>
            <label for="data_servizio">Data</label>
            <input type="date" id="data_servizio" name="data_servizio" required>
          </div>
          <div>
            <label for="ora_servizio">Orario</label>
            <input type="time" id="ora_servizio" name="ora_servizio" required>
          </div>
        </div>

        <h2 class="section-title">Extra opzionali</h2>
        <div class="tags">
          <label class="tag"><input type="checkbox" class="extra" id="extra_biancheria" data-minutes="30"> Cambio biancheria</label>
          <label class="tag"><input type="checkbox" class="extra" id="extra_forno" data-minutes="25"> Forno</label>
          <label class="tag"><input type="checkbox" class="extra" id="extra_frigo" data-minutes="20"> Frigo</label>
          <label class="tag"><input type="checkbox" class="extra" id="extra_vetri" data-minutes="40"> Vetri e infissi</label>
          <label class="tag"><input type="checkbox" class="extra" id="extra_balcone" data-minutes="25"> Balconi/verande</label>
          <label class="tag"><input type="checkbox" class="extra" id="extra_stiro" data-minutes="30"> Stiratura</label>
          <label class="tag"><input type="checkbox" class="extra" id="extra_kit" data-minutes="10"> Kit cortesia ospiti</label>
        </div>

        <label for="note">Note per il cleaner</label>
        <textarea id="note" name="note" rows="4" placeholder="Istruzioni per accesso, preferenze, ecc."></textarea>

        <div class="grid-3" style="align-items:center">
          <label class="checkbox">
            <input type="checkbox" id="terms" required> Accetto termini e condizioni.
          </label>
          <div></div>
          <button class="btn btn-primary" type="submit">Conferma e paga acconto</button>
        </div>
        <p class="muted micro">Il saldo avviene al termine del lavoro. I <strong>Costi del servizio B&B Clean</strong> sono mostrati prima della conferma.</p>
      </form>

      <!-- Riepilogo / Stima -->
      <aside class="card">
        <h2 class="section-title">Stima</h2>
        <p>Durata consigliata: <strong><span id="stima-ore">—</span> h</strong></p>
        <p>Costo stimato: <strong><span id="stima-costo">—</span></strong></p>
        <hr>
        <div id="mappa" style="height:220px;background:#eef2f7;border:1px dashed #cbd5e1;border-radius:12px;display:flex;align-items:center;justify-content:center">
          <span class="muted">Mappa</span>
        </div>
        <p class="muted micro">I valori sono indicativi e potrebbero variare in base alle condizioni reali.</p>
      </aside>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container footer-inner">
      <div class="footer-brand">
        <img src="/assets/img/bbclean-logo-primary.png" alt="B&B Clean" class="logo">
        <div>B&B <strong>Clean</strong><br><span class="muted">Il tuo tempo è il nostro lavoro!</span></div>
      </div>
      <nav class="footer-links">
        <a href="/servizi.html">Servizi</a>
        <a href="/prenota.html" class="active">Prenota</a>
        <a href="/partner.html">Diventa partner</a>
        <a href="/dashboard.html">Dashboard</a>
      </nav>
      <div class="footer-legal muted">© <span id="y"></span> B&B Clean — Tutti i diritti riservati</div>
    </div>
  </footer>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
    // Mini-hook: aggiorna la stima se esiste prenota.js
    function triggerStima(){ document.dispatchEvent(new Event('stima:update')); }
    ['mq','.extra','#mq','#bagni','#stanze'].forEach(sel=>{
      const els = typeof sel==='string' && (sel.startsWith('#')||sel.startsWith('.')) ? document.querySelectorAll(sel) : [];
      els.forEach(el => el.addEventListener('input', triggerStima));
      els.forEach(el => el.addEventListener('change', triggerStima));
    });
  </script>

  <!-- I TUOI SCRIPT ESISTENTI -->
  <script src="/assets/js/prenota.js" defer></script>
</body>
</html>
